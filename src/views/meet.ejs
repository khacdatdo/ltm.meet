<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Meet</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='/css/main.css'>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
</head>

<body>
    <div id="room-info" room-id="<%= roomId %>" display-name="<%= displayName %>"></div>
    <div class="meet">
        <div class="meet-video" id="meet-video">
            <div class="video-stream">
                <!-- video stream -->
                <video id="stream-video" autoplay playsInline controls="off"></video>
            </div>
            <div class="grid-video">
                <!-- video thuong -->
            </div>
            <div class="meet-controller">
                <div class="meet-icon">
                    <!-- icon chat -->
                    <div class="meet-icon-item">
                        <svg class="icon icon-chat" id="icon-chat" onclick="showChat()" viewBox="0 0 19 19" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M18 9.50003C18.0034 10.8199 17.6951 12.1219 17.1 13.3C16.3944 14.7118 15.3098 15.8992 13.9674 16.7293C12.6251 17.5594 11.0782 17.9994 9.5 18C8.31919 18.0031 7.15268 17.7566 6.07638 17.2785C5.83271 17.1703 5.55772 17.1475 5.30478 17.2318L1.89737 18.3676C1.11561 18.6282 0.37187 17.8844 0.632456 17.1027L1.76826 13.6953C1.85257 13.4423 1.82972 13.1673 1.72149 12.9236C1.24341 11.8474 0.996921 10.6808 1 9.50003C1.00061 7.92179 1.44061 6.37488 2.27072 5.03258C3.10083 3.69028 4.28825 2.6056 5.7 1.90003C6.87812 1.30496 8.18013 0.996587 9.5 1.00003H10C12.0843 1.11502 14.053 1.99479 15.5291 3.47089C17.0052 4.94699 17.885 6.91568 18 9.00003V9.50003Z"
                                stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                    <!-- icon settings -->
                    <div class="meet-icon-item" id="icon-settings">
                        <svg class="icon icon-settings" xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="256" height="256"
                            viewBox="0 0 256 256" xml:space="preserve">

                            <defs>
                            </defs>
                            <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;"
                                transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)">
                                <path
                                    d="M 52.1 90 H 37.9 c -2.867 0 -5.2 -2.333 -5.2 -5.2 v -2.114 c 0 -0.329 -0.191 -0.634 -0.454 -0.725 c -1.482 -0.511 -2.955 -1.122 -4.375 -1.816 c -0.246 -0.118 -0.576 -0.046 -0.802 0.18 l -1.516 1.516 c -0.981 0.982 -2.288 1.523 -3.677 1.523 c -1.389 0 -2.695 -0.541 -3.677 -1.524 L 8.16 71.799 c -2.027 -2.027 -2.027 -5.326 0 -7.354 l 1.516 -1.516 c 0.223 -0.223 0.299 -0.56 0.181 -0.8 c -0.695 -1.423 -1.307 -2.895 -1.818 -4.377 C 7.947 57.49 7.643 57.3 7.314 57.3 H 5.2 c -2.867 0 -5.2 -2.333 -5.2 -5.2 V 37.9 c 0 -2.867 2.333 -5.2 5.2 -5.2 h 2.115 c 0.329 0 0.633 -0.19 0.724 -0.454 c 0.513 -1.483 1.124 -2.956 1.817 -4.374 c 0.12 -0.246 0.046 -0.576 -0.181 -0.802 L 8.16 25.555 c -2.027 -2.028 -2.027 -5.327 0 -7.354 L 18.201 8.159 c 0.982 -0.982 2.288 -1.522 3.677 -1.522 c 1.389 0 2.695 0.541 3.677 1.522 l 1.516 1.517 c 0.224 0.223 0.559 0.3 0.801 0.18 c 1.418 -0.693 2.891 -1.305 4.375 -1.818 C 32.51 7.947 32.7 7.643 32.7 7.314 V 5.2 c 0 -2.867 2.333 -5.2 5.2 -5.2 h 14.2 c 2.867 0 5.2 2.333 5.2 5.2 v 2.115 c 0 0.329 0.19 0.633 0.453 0.724 c 1.482 0.512 2.954 1.124 4.375 1.818 c 0.247 0.118 0.575 0.045 0.802 -0.181 l 1.516 -1.516 c 2.027 -2.027 5.326 -2.027 7.354 0 L 81.84 18.2 c 2.027 2.028 2.027 5.327 0 7.354 l -1.516 1.516 c -0.227 0.227 -0.301 0.556 -0.181 0.802 c 0.695 1.42 1.307 2.893 1.818 4.376 c 0.09 0.262 0.395 0.452 0.724 0.452 H 84.8 c 2.867 0 5.2 2.333 5.2 5.2 V 52.1 c 0 2.867 -2.333 5.2 -5.2 5.2 h -2.114 c -0.329 0 -0.634 0.19 -0.725 0.454 c -0.51 1.478 -1.121 2.95 -1.815 4.373 c -0.119 0.244 -0.044 0.58 0.179 0.803 l 1.516 1.516 c 2.027 2.027 2.027 5.326 0 7.354 L 71.799 81.84 c -0.982 0.982 -2.288 1.523 -3.677 1.523 c -1.39 0 -2.696 -0.542 -3.678 -1.525 l -1.514 -1.513 c -0.228 -0.226 -0.557 -0.302 -0.803 -0.182 c -1.42 0.695 -2.893 1.307 -4.376 1.818 c -0.262 0.09 -0.452 0.395 -0.452 0.724 V 84.8 C 57.3 87.667 54.967 90 52.1 90 z M 39.7 83 h 10.6 v -0.314 c 0 -3.322 2.076 -6.272 5.167 -7.34 c 1.216 -0.42 2.422 -0.921 3.588 -1.491 c 2.936 -1.434 6.481 -0.822 8.824 1.521 l 0.243 0.242 l 7.495 -7.495 l -0.242 -0.243 c -2.345 -2.344 -2.955 -5.891 -1.519 -8.825 c 0.569 -1.166 1.07 -2.373 1.488 -3.585 c 1.068 -3.093 4.019 -5.169 7.341 -5.169 H 83 V 39.7 h -0.314 c -3.322 0 -6.272 -2.076 -7.34 -5.167 c -0.42 -1.216 -0.921 -2.422 -1.491 -3.588 c -1.434 -2.936 -0.823 -6.482 1.521 -8.825 l 0.242 -0.243 l -7.495 -7.495 l -0.243 0.243 c -2.344 2.344 -5.89 2.953 -8.824 1.52 c -1.166 -0.57 -2.373 -1.071 -3.587 -1.491 c -3.091 -1.067 -5.168 -4.017 -5.168 -7.34 V 7 H 39.7 v 0.314 c 0 3.323 -2.077 6.272 -5.168 7.34 c -1.217 0.42 -2.424 0.922 -3.587 1.491 c -2.936 1.434 -6.481 0.823 -8.825 -1.52 l -0.243 -0.243 l -7.495 7.495 l 0.243 0.243 c 2.343 2.344 2.954 5.89 1.52 8.825 c -0.568 1.163 -1.07 2.37 -1.49 3.587 c -1.068 3.092 -4.018 5.168 -7.34 5.168 H 7 v 10.6 h 0.314 c 3.323 0 6.272 2.077 7.34 5.168 c 0.419 1.214 0.921 2.421 1.491 3.588 c 1.435 2.933 0.824 6.479 -1.52 8.823 l -0.243 0.243 l 7.496 7.495 l 0.242 -0.242 c 2.344 -2.346 5.891 -2.954 8.826 -1.52 c 1.164 0.568 2.37 1.07 3.585 1.489 c 3.092 1.068 5.168 4.019 5.168 7.341 V 83 z M 45.028 70.402 c -6.738 0 -13.204 -2.652 -17.991 -7.439 c -5.265 -5.265 -7.947 -12.561 -7.359 -20.016 c 0.97 -12.296 10.974 -22.3 23.27 -23.27 c 7.457 -0.588 14.751 2.095 20.016 7.359 c 5.265 5.266 7.947 12.561 7.36 20.017 c -0.971 12.297 -10.975 22.3 -23.271 23.27 l 0 0 C 46.376 70.376 45.701 70.402 45.028 70.402 z M 44.969 26.598 c -0.489 0 -0.979 0.02 -1.471 0.058 c -8.899 0.702 -16.14 7.943 -16.842 16.843 c -0.427 5.41 1.516 10.7 5.331 14.515 s 9.1 5.761 14.516 5.331 l 0 0 c 8.899 -0.701 16.141 -7.941 16.843 -16.842 c 0.427 -5.41 -1.517 -10.701 -5.331 -14.516 C 54.546 28.519 49.857 26.598 44.969 26.598 z"
                                    style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;"
                                    transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                            </g>
                        </svg>
                    </div>
                    <!-- icon micro -->
                    <div class="meet-icon-item" id="icon-micro">
                        <svg width="20" height="30" class="icon icon-micro" viewBox="0 0 20 30" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M9.5 1C8.57174 1 7.6815 1.40638 7.02513 2.12973C6.36875 2.85309 6 3.83416 6 4.85714V15.1429C6 16.1658 6.36875 17.1469 7.02513 17.8703C7.6815 18.5936 8.57174 19 9.5 19C10.4283 19 11.3185 18.5936 11.9749 17.8703C12.6313 17.1469 13 16.1658 13 15.1429V4.85714C13 3.83416 12.6313 2.85309 11.9749 2.12973C11.3185 1.40638 10.4283 1 9.5 1Z"
                                fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                            <path
                                d="M19 12V14.6667C19 17.142 18.0518 19.516 16.364 21.2663C14.6761 23.0167 12.3869 24 10 24C7.61305 24 5.32387 23.0167 3.63604 21.2663C1.94821 19.516 1 17.142 1 14.6667V12"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M10 24V29" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                            <path d="M4 29H15" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                        </svg>

                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-mute-micro"
                            xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="256" height="256"
                            viewBox="0 0 256 256" xml:space="preserve">

                            <defs>
                            </defs>
                            <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;"
                                transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)">
                                <path
                                    d="M 70.219 0.253 c -0.963 -0.538 -2.183 -0.191 -2.721 0.773 l -7.19 12.897 C 59.57 6.124 52.989 0 45 0 c -8.481 0 -15.382 6.9 -15.382 15.382 v 22.93 h -8.863 c -1.104 0 -2 0.896 -2 2 v 6.505 c 0 8.562 4.257 16.632 11.221 21.513 L 19.553 87.026 c -0.538 0.965 -0.191 2.183 0.773 2.721 C 20.634 89.919 20.968 90 21.298 90 c 0.702 0 1.383 -0.37 1.749 -1.026 l 47.945 -86 C 71.53 2.009 71.184 0.791 70.219 0.253 z M 22.755 46.817 v -4.505 h 6.863 v 2.114 c 0 5.12 2.497 9.802 6.631 12.652 l -4.31 7.732 C 26.233 60.651 22.755 53.937 22.755 46.817 z"
                                    style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: currentColor; fill-rule: nonzero; opacity: 1;"
                                    transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                                <path
                                    d="M 69.245 38.312 h -8.863 v -4.271 c 0 -1.104 -0.896 -2 -2 -2 s -2 0.896 -2 2 v 10.385 c 0 6.152 -5.002 11.256 -11.149 11.379 c -1.104 0.022 -1.981 0.936 -1.959 2.04 c 0.022 1.091 0.913 1.96 1.999 1.96 c 0.014 0 0.027 0 0.041 0 c 8.31 -0.167 15.069 -7.065 15.069 -15.379 v -2.114 h 6.863 v 4.505 c 0 12.266 -9.979 22.244 -22.245 22.244 c -2.1 0 -4.178 -0.292 -6.176 -0.867 c -1.06 -0.308 -2.169 0.308 -2.475 1.368 c -0.306 1.062 0.307 2.17 1.369 2.476 c 1.721 0.495 3.491 0.808 5.283 0.943 V 86 h -9.126 c -1.104 0 -2 0.896 -2 2 s 0.896 2 2 2 h 22.252 c 1.104 0 2 -0.896 2 -2 s -0.896 -2 -2 -2 H 47 V 72.978 c 13.54 -1.026 24.245 -12.363 24.245 -26.16 v -6.505 C 71.245 39.208 70.35 38.312 69.245 38.312 z"
                                    style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: currentColor; fill-rule: nonzero; opacity: 1;"
                                    transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                            </g>
                        </svg>

                    </div>
                    <!-- icon video -->
                    <div class="meet-icon-item" id="icon-video">
                        <svg width="32" height="21" class="icon icon-video" viewBox="0 0 32 21" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M31 4L22 11L31 18V4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" />
                            <path
                                d="M19.2 1H3.8C2.2536 1 1 2.21523 1 3.71429V17.2857C1 18.7848 2.2536 20 3.8 20H19.2C20.7464 20 22 18.7848 22 17.2857V3.71429C22 2.21523 20.7464 1 19.2 1Z"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-off-video"
                            xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="256" height="256"
                            viewBox="0 0 256 256" xml:space="preserve">

                            <defs>
                            </defs>
                            <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;"
                                transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)">
                                <path
                                    d="M 87.447 27.111 c -1.599 -1.129 -3.654 -1.411 -5.499 -0.757 l -14.94 5.307 v -3.346 L 89.32 8.7 c 0.83 -0.729 0.911 -1.993 0.182 -2.822 c -0.729 -0.829 -1.991 -0.911 -2.822 -0.182 L 0.68 81.3 c -0.83 0.729 -0.911 1.993 -0.182 2.822 c 0.395 0.45 0.948 0.68 1.503 0.68 c 0.469 0 0.939 -0.164 1.319 -0.498 L 19.329 70.23 h 39.412 c 4.559 0 8.267 -3.708 8.267 -8.267 v -5.083 l 14.94 5.307 c 0.655 0.232 1.337 0.347 2.016 0.347 c 1.231 0 2.452 -0.376 3.483 -1.104 C 89.046 60.301 90 58.459 90 56.502 V 32.039 C 90 30.082 89.046 28.24 87.447 27.111 z"
                                    style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: currentColor; fill-rule: nonzero; opacity: 1;"
                                    transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                                <path
                                    d="M 5.026 69.567 l 56.783 -49.919 c -0.251 -0.587 -0.776 -1.044 -1.449 -1.178 c -0.53 -0.105 -1.075 -0.159 -1.619 -0.159 H 8.267 C 3.708 18.311 0 22.019 0 26.578 v 35.386 C 0 65.372 2.074 68.304 5.026 69.567 z"
                                    style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: currentColor; fill-rule: nonzero; opacity: 1;"
                                    transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                            </g>
                        </svg>

                    </div>
        
                    <!-- icon endcall -->
                    <div class="meet-icon-item meet-icon-item__end-call" id="end_call">
                        <svg class="icon icon-end-call" xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="256" height="256"
                            viewBox="0 0 256 256" xml:space="preserve">

                            <defs>
                            </defs>
                            <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;"
                                transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)">
                                <path
                                    d="M 38.789 51.211 l 10.876 10.876 c 0.974 0.974 2.471 1.194 3.684 0.543 l 13.034 -6.997 c 0.964 -0.518 2.129 -0.493 3.07 0.066 l 19.017 11.285 c 1.357 0.805 1.903 2.489 1.268 3.933 c -1.625 3.698 -4.583 10.476 -5.758 13.473 c -0.247 0.631 -0.615 1.209 -1.127 1.652 c -12.674 10.986 -37.89 -2.4 -57.191 -21.701 C 6.358 45.039 -7.028 19.823 3.958 7.149 c 0.444 -0.512 1.022 -0.88 1.652 -1.127 c 2.996 -1.175 9.775 -4.133 13.473 -5.758 c 1.444 -0.635 3.128 -0.089 3.933 1.268 l 11.285 19.017 c 0.558 0.941 0.583 2.106 0.066 3.07 L 27.37 36.651 c -0.651 1.213 -0.431 2.71 0.543 3.684 C 27.913 40.335 38.789 51.211 38.789 51.211 z"
                                    style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: currentColor; fill-rule: nonzero; opacity: 1;"
                                    transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
                            </g>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
        <div class="meet-chat active" id="meet-chat">
            <!-- chat box -->
            <div class="tab-bar">
                <div class="tab-item active">
                    <span>Chat box</span>
                </div>
                <div class="button-close-chat" id="button-close-chat" onclick="hideChat()">
                    <svg class="icon icon-close" viewBox="0 0 39 39" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M13 13L26 26" stroke="#323232" stroke-width="2.4375" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <path d="M26 13L13 26" stroke="#323232" stroke-width="2.4375" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>

                </div>
            </div>
            <div class="tab-content-parent">
                <div id="chat" class="tab-content">
                    <div class="chat-content" id="messages">
                    </div>
                    <div class="chat-input">
                        <small>Ctr + Enter to send</small>
                        <textarea id="messageBox" class="m-y-1" name="chatContext" cols="30" rows="5"
                            placeholder="Type message..."></textarea>
                    </div>
                </div>
            </div>
        </div>

        <!-- settings -->
        <div class="meet-settings" id="meet-settings">
            <div class="meet-settings__tab">
                <h1>Cài đặt</h1>
                <div class="meet-settings__tab-voice meet-settings__tab-item active" id="meet-settings__tab-voice"
                    onclick="chooseVoice()">
                    Âm thanh
                </div>
                <div class="meet-settings__tab-video meet-settings__tab-item" id="meet-settings__tab-video"
                    onclick="chooseVideo()">
                    Video
                </div>
            </div>

            <div class="meet-settings__main">
                <div class="meet-settings__main-button-close-chat" onclick="hideSettings()" id="button-close-chat"
                    onclick="hideChat()">
                    <svg class="icon icon-close" viewBox="0 0 39 39" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M13 13L26 26" stroke="#323232" stroke-width="2.4375" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <path d="M26 13L13 26" stroke="#323232" stroke-width="2.4375" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>

                </div>
                <div class="voice active" id="voice-settings">
                    <div class="meet-settings__main-title">
                        Micro
                    </div>
                    <select id="select-micro" class="form-select" aria-label="Default select example">
                    </select>
                    <div class="meet-settings__main-title">
                        Loa
                    </div>
                    <select id="select-speaker" class="form-select" aria-label="Default select example">
                    </select>
                </div>

                <div class="video" id="video-settings">
                    <div class="meet-settings__main-title">
                        Máy ảnh
                    </div>
                    <select id="select-camera" class="form-select" aria-label="Default select example">
                    </select>
                </div>
            </div>
        </div>


    </div>


    <script src="https://unpkg.com/peerjs@1.4.7/dist/peerjs.min.js"></script>
    <script src='/js/action.js'></script>
    <script src='/js/meet.js'></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
        crossorigin="anonymous"></script>
</body>

</html>
